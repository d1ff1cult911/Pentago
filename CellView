using System.Collections;
using UnityEngine;

public class CellView : MonoBehaviour
{
    private int x, y;
    private BoardManagerMono board;
    private MeshRenderer meshRenderer;
    public void Init(int gx, int gy, BoardManagerMono manager)
    {
        x = gx;
        y = gy;
        board = manager;
        GetComponent<MeshRenderer>().material.color = Color.white;
    }

    public void OnClick()
    {

        board.PlaceMark(x, y);
    }
    public void SetCoords(int newX, int newY)
    {
        x = newX;
        y = newY;
    }
    public void SetColor(Color color)
    {
        if (meshRenderer == null)
            meshRenderer = GetComponent<MeshRenderer>();

        meshRenderer.material.color = color;
    }
    public void Highlight()
    {
        var renderer = GetComponent<MeshRenderer>();
        renderer.material.color = Color.yellow;
    }

    public void StartWinPulse()
    {
        StartCoroutine(WinPulseCoroutine());
    }

    public IEnumerator WinPulseCoroutine()
    {
        Vector3 baseScale = transform.localScale;
        float t = 0f;

        while (true)
        {
            t += Time.deltaTime * 3f;
            float scale = 1f + Mathf.Sin(t) * 0.15f;
            transform.localScale = baseScale * scale;
            yield return null;
        }
    }


}
